<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Marcha - A powerful Windows process and task management application built with Flutter">
  <title>Marcha Documentation</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="overlay"></div>

  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-logo">üöÄ</span>
        <div>
          <h1 class="sidebar-title">Marcha</h1>
          <span class="sidebar-version">v1.0</span>
        </div>
      </div>

      <nav>
        <div class="nav-section">
          <h2 class="nav-section-title">Getting Started</h2>
          <ul class="nav-links">
            <li><a href="#overview" class="nav-link active">Overview</a></li>
            <li><a href="#installation" class="nav-link">Installation</a></li>
            <li><a href="#quick-start" class="nav-link">Quick Start</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h2 class="nav-section-title">Features</h2>
          <ul class="nav-links">
            <li><a href="#templates" class="nav-link">Templates</a></li>
            <li><a href="#terminals" class="nav-link">Terminals</a></li>
            <li><a href="#layouts" class="nav-link">Layouts</a></li>
            <li><a href="#history" class="nav-link">Execution History</a></li>
            <li><a href="#automation" class="nav-link">Automation Steps</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h2 class="nav-section-title">Configuration</h2>
          <ul class="nav-links">
            <li><a href="#settings" class="nav-link">Settings</a></li>
            <li><a href="#data-storage" class="nav-link">Data Storage</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h2 class="nav-section-title">Reference</h2>
          <ul class="nav-links">
            <li><a href="#troubleshooting" class="nav-link">Troubleshooting</a></li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="header">
        <button class="mobile-menu-toggle" aria-label="Toggle menu">‚ò∞</button>

        <div class="search-box">
          <span class="search-icon">üîç</span>
          <input type="text" class="search-input" placeholder="Search docs...">
        </div>

        <div class="header-actions">
          <a href="https://github.com/yourusername/marcha" class="btn btn-secondary" target="_blank">
            GitHub
          </a>
          <button class="theme-toggle">
            <span class="theme-toggle-icon">üåô</span>
            <span class="theme-toggle-text">Dark</span>
          </button>
        </div>
      </header>

      <div class="content">
        <!-- Hero Section -->
        <section class="hero">
          <div class="hero-icon">üöÄ</div>
          <h1>Marcha</h1>
          <p class="hero-subtitle">
            A powerful Windows process and task management application.
            Orchestrate, monitor, and manage multiple terminal instances efficiently.
          </p>
          <div class="hero-buttons">
            <a href="#installation" class="btn btn-primary">Get Started</a>
            <a href="#overview" class="btn btn-secondary">Learn More</a>
          </div>
        </section>

        <!-- Overview Section -->
        <section id="overview" class="section">
          <h2>Overview</h2>
          <p>
            Marcha is a desktop application designed for developers and power users who need to manage
            multiple processes and terminal sessions simultaneously. Built with Flutter for Windows,
            it provides a flexible multi-pane interface that adapts to your workflow.
          </p>

          <div class="feature-grid">
            <div class="feature-card">
              <div class="feature-icon">üìã</div>
              <h3 class="feature-title">Templates</h3>
              <p class="feature-description">Save command configurations as templates with customizable commands, arguments, and working directories.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üíª</div>
              <h3 class="feature-title">Multi-Terminal</h3>
              <p class="feature-description">Run multiple terminal instances with full PTY support using xterm emulation.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üìê</div>
              <h3 class="feature-title">Flexible Layouts</h3>
              <p class="feature-description">Choose from 10 layout presets and assign content to panes to customize your workspace.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">‚ö°</div>
              <h3 class="feature-title">Automation Steps</h3>
              <p class="feature-description">Define expect/send automation sequences to interact with processes automatically.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üé®</div>
              <h3 class="feature-title">Customizable</h3>
              <p class="feature-description">Dark/light themes, text scaling, custom terminal color themes, and more.</p>
            </div>
          </div>
        </section>

        <!-- Installation Section -->
        <section id="installation" class="section">
          <h2>Installation</h2>

          <h3>Prerequisites</h3>
          <ul>
            <li>Windows 10/11</li>
            <li>Flutter SDK 3.0 or later</li>
            <li>Visual Studio with C++ build tools</li>
            <li>Windows 11 SDK</li>
          </ul>

          <h3>Build from Source</h3>
          <pre><code># Clone the repository
git clone https://github.com/yourusername/marcha.git
cd marcha

# Get dependencies
flutter pub get

# Run in debug mode
flutter run -d windows

# Build release version
flutter build windows --release</code></pre>

          <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div class="alert-content">
              <div class="alert-title">Tip</div>
              <p>The release build will be located in <code>build/windows/x64/runner/Release/</code></p>
            </div>
          </div>
        </section>

        <!-- Quick Start Section -->
        <section id="quick-start" class="section">
          <h2>Quick Start</h2>

          <h3>1. Launch Marcha</h3>
          <p>After building, run <code>marcha.exe</code> from the release folder or use <code>flutter run -d windows</code> for development.</p>

          <h3>2. Create Your First Template</h3>
          <ol>
            <li>In the Tasks List pane, click the <strong>+</strong> button</li>
            <li>Select <strong>Add Template</strong></li>
            <li>Enter a name (e.g., "Dev Server")</li>
            <li>Set the command (e.g., <code>npm</code>)</li>
            <li>Add arguments (e.g., <code>run dev</code>)</li>
            <li>Optionally set a working directory</li>
            <li>Choose an emoji icon</li>
            <li>Click <strong>Save</strong></li>
          </ol>

          <h3>3. Run Your Template</h3>
          <p>Click the play button next to your template. A task will be created and started in an available terminal pane.</p>

          <h3>4. Monitor and Control</h3>
          <ul>
            <li>View output in real-time in the terminal pane</li>
            <li>Click the stop button to terminate the task</li>
            <li>Check execution history in the History pane</li>
          </ul>
        </section>

        <!-- Templates Section -->
        <section id="templates" class="section">
          <h2>Templates</h2>

          <p>Templates are saved command configurations that can be launched repeatedly. When you run a template, it creates a Task - an active running process.</p>

          <h3>Template Properties</h3>
          <table>
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>name</code></td>
                <td>Display name for the template</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td><code>command</code></td>
                <td>Command to run (e.g., python, npm, node)</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td><code>arguments</code></td>
                <td>Command-line arguments (can include placeholders)</td>
                <td>No</td>
              </tr>
              <tr>
                <td><code>workingDirectory</code></td>
                <td>Directory to run the command in</td>
                <td>No</td>
              </tr>
              <tr>
                <td><code>emoji</code></td>
                <td>Icon displayed in the UI</td>
                <td>No (default: üöÄ)</td>
              </tr>
              <tr>
                <td><code>description</code></td>
                <td>Detailed description</td>
                <td>No</td>
              </tr>
              <tr>
                <td><code>steps</code></td>
                <td>Automation steps (expect/send sequences)</td>
                <td>No</td>
              </tr>
            </tbody>
          </table>

          <h3>Placeholders</h3>
          <p>Use <code>${placeholderName}</code> syntax in commands or arguments to prompt for input before running:</p>
          <pre><code>command: npm
arguments: ["run", "${script}"]</code></pre>
          <p>When launched, Marcha will prompt you to enter a value for <code>script</code>.</p>

          <h3>Template Groups</h3>
          <p>Organize related templates into groups:</p>
          <ul>
            <li>Create groups from the Add menu</li>
            <li>Add templates to groups</li>
            <li>Reorder templates within groups</li>
            <li>Drag templates between groups and the ungrouped list</li>
          </ul>
        </section>

        <!-- Terminals Section -->
        <section id="terminals" class="section">
          <h2>Terminals</h2>

          <p>
            Marcha uses full xterm emulation with PTY (pseudo-terminal) support via
            <code>flutter_pty</code> and <code>xterm</code> packages. This provides complete
            terminal functionality including colors, cursor positioning, and interactive applications.
          </p>

          <h3>Terminal Features</h3>
          <ul>
            <li>Full ANSI escape sequence support</li>
            <li>Interactive input for running processes</li>
            <li>Automatic terminal resizing</li>
            <li>Customizable color themes</li>
            <li>Copy terminal output</li>
            <li>Clear terminal buffer</li>
          </ul>

          <h3>Terminal Themes</h3>
          <p>Marcha includes several built-in terminal themes and supports creating custom themes with full color customization:</p>
          <ul>
            <li>Background colors (main, title bar, input area, border)</li>
            <li>Text colors (foreground, timestamp, prompt, exit code)</li>
            <li>Status colors (success, warning, error, running)</li>
          </ul>
        </section>

        <!-- Layouts Section -->
        <section id="layouts" class="section">
          <h2>Layouts</h2>

          <p>Marcha offers 10 layout presets to organize your workspace:</p>

          <table>
            <thead>
              <tr>
                <th>Layout</th>
                <th>Panes</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1 Pane</td>
                <td>1</td>
                <td>One full-width pane</td>
              </tr>
              <tr>
                <td>2 Columns</td>
                <td>2</td>
                <td>Two equal vertical panes</td>
              </tr>
              <tr>
                <td>2 Rows</td>
                <td>2</td>
                <td>Two equal horizontal panes</td>
              </tr>
              <tr>
                <td>3 Columns</td>
                <td>3</td>
                <td>Three equal vertical panes</td>
              </tr>
              <tr>
                <td>3 Rows</td>
                <td>3</td>
                <td>Three equal horizontal panes</td>
              </tr>
              <tr>
                <td>2 Left + 1 Right</td>
                <td>3</td>
                <td>Two stacked panes on left, one large on right</td>
              </tr>
              <tr>
                <td>1 Left + 2 Right</td>
                <td>3</td>
                <td>One large pane on left, two stacked on right</td>
              </tr>
              <tr>
                <td>2 Top + 1 Bottom</td>
                <td>3</td>
                <td>Two panes on top, one wide on bottom</td>
              </tr>
              <tr>
                <td>1 Top + 2 Bottom</td>
                <td>3</td>
                <td>One wide pane on top, two on bottom</td>
              </tr>
              <tr>
                <td>2x2 Grid</td>
                <td>4</td>
                <td>Four equal quadrants</td>
              </tr>
            </tbody>
          </table>

          <h3>Pane Types</h3>
          <ul>
            <li><strong>Tasks List:</strong> Shows your templates and groups</li>
            <li><strong>History:</strong> Displays execution history</li>
            <li><strong>Terminal:</strong> Terminal instance for process output</li>
            <li><strong>Empty:</strong> Available slot for terminals</li>
          </ul>

          <h3>Resizable Panes</h3>
          <p>Drag the dividers between panes to resize them. Pane sizes are saved per layout preset and persist across sessions.</p>

          <h3>Minimized Panes</h3>
          <p>When Tasks List or History is replaced by a terminal, it becomes "minimized" and can be restored from the dropdown menu.</p>
        </section>

        <!-- History Section -->
        <section id="history" class="section">
          <h2>Execution History</h2>

          <p>Marcha tracks all task executions with detailed information:</p>

          <h3>History Entry Data</h3>
          <ul>
            <li><strong>Task Name:</strong> Name of the executed template</li>
            <li><strong>Start Time:</strong> When the task started</li>
            <li><strong>End Time:</strong> When the task completed (if finished)</li>
            <li><strong>Status:</strong> Running, Completed, Stopped, Error, or Archived</li>
            <li><strong>Command:</strong> The full command that was executed</li>
          </ul>

          <h3>History Actions</h3>
          <ul>
            <li><strong>Show in Pane:</strong> Display running task in a terminal slot</li>
            <li><strong>Stop:</strong> Terminate a running process</li>
            <li><strong>Archive:</strong> Hide entry from default view</li>
            <li><strong>Delete:</strong> Permanently remove entry</li>
            <li><strong>Clear Completed:</strong> Remove all non-running entries</li>
          </ul>

          <h3>Status Colors</h3>
          <ul>
            <li><span style="color: #50FA7B;">‚óè</span> <strong>Running:</strong> Task is currently executing</li>
            <li><span style="color: #6272A4;">‚óè</span> <strong>Completed:</strong> Task finished successfully</li>
            <li><span style="color: #FFB86C;">‚óè</span> <strong>Stopped:</strong> Task was manually stopped</li>
            <li><span style="color: #FF5555;">‚óè</span> <strong>Error:</strong> Task encountered an error</li>
          </ul>
        </section>

        <!-- Automation Section -->
        <section id="automation" class="section">
          <h2>Automation Steps</h2>

          <p>
            Automation steps allow you to define expect/send sequences that automatically interact
            with a process. This is useful for automated logins, menu navigation, or any interactive
            command-line workflow.
          </p>

          <h3>Step Properties</h3>
          <table>
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>expect</code></td>
                <td>Pattern (regex or plain text) to wait for in output</td>
              </tr>
              <tr>
                <td><code>send</code></td>
                <td>Text to send when pattern is matched (can include placeholders)</td>
              </tr>
              <tr>
                <td><code>timeout</code></td>
                <td>Milliseconds to wait before timing out (default: 30000)</td>
              </tr>
            </tbody>
          </table>

          <h3>Example: Auto-login to SSH</h3>
          <pre><code>Template:
  command: ssh
  arguments: ["user@server.com"]
  steps:
    - expect: "password:"
      send: "${password}"
      timeout: 10000
    - expect: "\\$"
      send: "cd /var/www"</code></pre>

          <h3>Step Execution Status</h3>
          <ul>
            <li><strong>Waiting:</strong> Watching output for pattern match</li>
            <li><strong>Completed:</strong> All steps finished successfully</li>
            <li><strong>Timed Out:</strong> Pattern not found within timeout</li>
          </ul>

          <p>If a step times out, you can retry the current step or skip it. Once all steps complete, the terminal becomes fully interactive.</p>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
          <h2>Settings</h2>

          <h3>Interface</h3>
          <ul>
            <li><strong>UI Scale:</strong> Small (1x), Medium (1.2x), Large (1.4x), or Extra Large (1.6x)</li>
            <li><strong>Theme:</strong> Dark or Light mode</li>
          </ul>

          <h3>Terminal</h3>
          <ul>
            <li><strong>Font Size:</strong> Independent scaling for terminal text (S/M/L/XL)</li>
            <li><strong>Color Theme:</strong> Select from built-in themes or create custom ones</li>
            <li><strong>Customize Colors:</strong> Edit individual colors in the current theme</li>
          </ul>

          <h3>Limits</h3>
          <ul>
            <li><strong>Max Concurrent Tasks:</strong> Limit simultaneous processes (1-50, default 10)</li>
          </ul>
        </section>

        <!-- Data Storage Section -->
        <section id="data-storage" class="section">
          <h2>Data Storage</h2>

          <p>All Marcha data is stored in <code>%APPDATA%\Marcha\</code>:</p>

          <table>
            <thead>
              <tr>
                <th>File</th>
                <th>Purpose</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>settings.json</code></td>
                <td>Application settings (theme, text size, layout state, terminal themes)</td>
              </tr>
              <tr>
                <td><code>templates.json</code></td>
                <td>Saved template definitions</td>
              </tr>
              <tr>
                <td><code>task_groups.json</code></td>
                <td>Template group configurations</td>
              </tr>
              <tr>
                <td><code>display_order.json</code></td>
                <td>Order of templates and groups in the list</td>
              </tr>
              <tr>
                <td><code>history.json</code></td>
                <td>Execution history records</td>
              </tr>
            </tbody>
          </table>

          <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div class="alert-content">
              <div class="alert-title">Backup Your Data</div>
              <p>These JSON files are human-readable and can be backed up or edited manually if needed.</p>
            </div>
          </div>
        </section>

        <!-- Troubleshooting Section -->
        <section id="troubleshooting" class="section">
          <h2>Troubleshooting</h2>

          <h3>Process won't start</h3>
          <ul>
            <li>Check if you've reached the max concurrent tasks limit</li>
            <li>Verify the executable is in your system PATH</li>
            <li>Check the working directory exists</li>
            <li>Look for error messages in the terminal output</li>
          </ul>

          <h3>Terminal shows garbled output</h3>
          <ul>
            <li>Ensure the process outputs UTF-8 encoded text</li>
            <li>For Python, the app automatically sets PYTHONIOENCODING=utf-8</li>
          </ul>

          <h3>Process won't stop</h3>
          <ul>
            <li>Marcha first sends Ctrl+C, then waits before force-killing</li>
            <li>If still running, it force-kills the process tree</li>
            <li>Use Task Manager if Marcha can't terminate it</li>
          </ul>

          <h3>Layout not saving</h3>
          <ul>
            <li>Check write permissions to %APPDATA%\Marcha\</li>
            <li>Try deleting <code>settings.json</code> to reset</li>
          </ul>

          <h3>Automation step timing out</h3>
          <ul>
            <li>Verify the expect pattern matches actual output</li>
            <li>Increase the timeout value for slow processes</li>
            <li>Check that the regex syntax is valid</li>
            <li>Use plain text matching for simple patterns</li>
          </ul>
        </section>

        <!-- Footer -->
        <footer style="margin-top: 64px; padding-top: 32px; border-top: 1px solid var(--border-color); text-align: center; color: var(--text-muted);">
          <p>Marcha Documentation ‚Ä¢ Built with Flutter</p>
          <p style="margin-top: 8px;">
            <a href="https://github.com/yourusername/marcha">GitHub</a> ‚Ä¢
            <a href="#overview">Back to Top</a>
          </p>
        </footer>
      </div>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
