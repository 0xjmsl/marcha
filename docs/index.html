<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Marcha - A powerful Windows process and task management application built with Flutter">
  <title>Marcha Documentation</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="overlay"></div>

  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-logo">üöÄ</span>
        <div>
          <h1 class="sidebar-title">Marcha</h1>
          <span class="sidebar-version">v1.0</span>
        </div>
      </div>

      <nav>
        <div class="nav-section">
          <h2 class="nav-section-title">Getting Started</h2>
          <ul class="nav-links">
            <li><a href="#overview" class="nav-link active">Overview</a></li>
            <li><a href="#installation" class="nav-link">Installation</a></li>
            <li><a href="#quick-start" class="nav-link">Quick Start</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h2 class="nav-section-title">Features</h2>
          <ul class="nav-links">
            <li><a href="#tasks" class="nav-link">Task Management</a></li>
            <li><a href="#terminals" class="nav-link">Terminals</a></li>
            <li><a href="#layouts" class="nav-link">Layouts</a></li>
            <li><a href="#scripts" class="nav-link">Script Configuration</a></li>
            <li><a href="#history" class="nav-link">Execution History</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h2 class="nav-section-title">Configuration</h2>
          <ul class="nav-links">
            <li><a href="#settings" class="nav-link">Settings</a></li>
            <li><a href="#config-file" class="nav-link">marcha.config.json</a></li>
            <li><a href="#data-storage" class="nav-link">Data Storage</a></li>
          </ul>
        </div>

        <div class="nav-section">
          <h2 class="nav-section-title">Reference</h2>
          <ul class="nav-links">
            <li><a href="#keyboard-shortcuts" class="nav-link">Keyboard Shortcuts</a></li>
            <li><a href="#troubleshooting" class="nav-link">Troubleshooting</a></li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="header">
        <button class="mobile-menu-toggle" aria-label="Toggle menu">‚ò∞</button>

        <div class="search-box">
          <span class="search-icon">üîç</span>
          <input type="text" class="search-input" placeholder="Search docs... (Ctrl+K)">
        </div>

        <div class="header-actions">
          <a href="https://github.com/yourusername/marcha" class="btn btn-secondary" target="_blank">
            GitHub
          </a>
          <button class="theme-toggle">
            <span class="theme-toggle-icon">üåô</span>
            <span class="theme-toggle-text">Dark</span>
          </button>
        </div>
      </header>

      <div class="content">
        <!-- Hero Section -->
        <section class="hero">
          <div class="hero-icon">üöÄ</div>
          <h1>Marcha</h1>
          <p class="hero-subtitle">
            A powerful Windows process and task management application.
            Orchestrate, monitor, and manage multiple terminal instances efficiently.
          </p>
          <div class="hero-buttons">
            <a href="#installation" class="btn btn-primary">Get Started</a>
            <a href="#overview" class="btn btn-secondary">Learn More</a>
          </div>
        </section>

        <!-- Overview Section -->
        <section id="overview" class="section">
          <h2>Overview</h2>
          <p>
            Marcha is a desktop application designed for developers and power users who need to manage
            multiple processes and terminal sessions simultaneously. Built with Flutter for Windows,
            it provides a flexible multi-pane interface that adapts to your workflow.
          </p>

          <div class="feature-grid">
            <div class="feature-card">
              <div class="feature-icon">üìã</div>
              <h3 class="feature-title">Task Management</h3>
              <p class="feature-description">Create, organize, and execute tasks with customizable commands, arguments, and working directories.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üíª</div>
              <h3 class="feature-title">Multi-Terminal</h3>
              <p class="feature-description">Run multiple terminal instances with full PTY support or lightweight text output.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üìê</div>
              <h3 class="feature-title">Flexible Layouts</h3>
              <p class="feature-description">Choose from 10 layout presets and drag-and-drop panes to customize your workspace.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">‚ö°</div>
              <h3 class="feature-title">Script Configs</h3>
              <p class="feature-description">Define parameterized scripts in JSON files with inputs, validation, and defaults.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üìä</div>
              <h3 class="feature-title">Process Monitoring</h3>
              <p class="feature-description">Track CPU and memory usage in real-time with complete execution history.</p>
            </div>

            <div class="feature-card">
              <div class="feature-icon">üé®</div>
              <h3 class="feature-title">Customizable</h3>
              <p class="feature-description">Dark/light themes, text scaling, terminal styles, and more personalization options.</p>
            </div>
          </div>
        </section>

        <!-- Installation Section -->
        <section id="installation" class="section">
          <h2>Installation</h2>

          <h3>Prerequisites</h3>
          <ul>
            <li>Windows 10/11</li>
            <li>Flutter SDK 3.0 or later</li>
            <li>Visual Studio with C++ build tools</li>
            <li>Windows 11 SDK</li>
          </ul>

          <h3>Build from Source</h3>
          <pre><code># Clone the repository
git clone https://github.com/yourusername/marcha.git
cd marcha

# Get dependencies
flutter pub get

# Run in debug mode
flutter run -d windows

# Build release version
flutter build windows --release</code></pre>

          <div class="alert alert-info">
            <span class="alert-icon">üí°</span>
            <div class="alert-content">
              <div class="alert-title">Tip</div>
              <p>The release build will be located in <code>build/windows/x64/runner/Release/</code></p>
            </div>
          </div>
        </section>

        <!-- Quick Start Section -->
        <section id="quick-start" class="section">
          <h2>Quick Start</h2>

          <h3>1. Launch Marcha</h3>
          <p>After building, run <code>marcha.exe</code> from the release folder or use <code>flutter run -d windows</code> for development.</p>

          <h3>2. Create Your First Task</h3>
          <ol>
            <li>Click the <strong>Add</strong> button in the left sidebar</li>
            <li>Select <strong>Add Task</strong></li>
            <li>Enter a name (e.g., "Dev Server")</li>
            <li>Set the executable (e.g., <code>npm</code>)</li>
            <li>Add arguments (e.g., <code>run dev</code>)</li>
            <li>Optionally set a working directory</li>
            <li>Choose an emoji icon</li>
            <li>Click <strong>Save</strong></li>
          </ol>

          <h3>3. Run Your Task</h3>
          <p>Click the üöÄ rocket icon next to your task. The process will start in an available terminal pane.</p>

          <h3>4. Monitor and Control</h3>
          <ul>
            <li>View output in real-time in the terminal pane</li>
            <li>Click the stop button to terminate</li>
            <li>Check execution history in the History pane</li>
          </ul>
        </section>

        <!-- Task Management Section -->
        <section id="tasks" class="section">
          <h2>Task Management</h2>

          <h3>Task Properties</h3>
          <table>
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>name</code></td>
                <td>Display name for the task</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td><code>executable</code></td>
                <td>Command to run (e.g., python, npm, node)</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td><code>arguments</code></td>
                <td>Command-line arguments</td>
                <td>No</td>
              </tr>
              <tr>
                <td><code>workingDirectory</code></td>
                <td>Directory to run the command in</td>
                <td>No</td>
              </tr>
              <tr>
                <td><code>emoji</code></td>
                <td>Icon displayed in the UI</td>
                <td>No (default: üöÄ)</td>
              </tr>
              <tr>
                <td><code>description</code></td>
                <td>Detailed description shown on expand</td>
                <td>No</td>
              </tr>
            </tbody>
          </table>

          <h3>Task Groups</h3>
          <p>Organize related tasks into groups for batch execution:</p>
          <ul>
            <li>Create groups from the Add menu</li>
            <li>Drag tasks into groups</li>
            <li>Run all tasks in a group sequentially</li>
            <li>Reorder tasks within groups</li>
          </ul>

          <h3>Quick Tasks</h3>
          <p>Pin frequently used tasks to the Quick Tasks section for one-click access.</p>
        </section>

        <!-- Terminals Section -->
        <section id="terminals" class="section">
          <h2>Terminals</h2>

          <h3>Terminal Types</h3>
          <div class="card">
            <div class="card-header">
              <span class="card-icon">‚ö°</span>
              <h4 class="card-title">Dev Terminal (Recommended)</h4>
            </div>
            <p class="card-description">
              Full xterm emulation with PTY support. Provides complete terminal functionality including
              colors, cursor positioning, and interactive applications. Uses <code>flutter_pty</code>
              and <code>xterm</code> packages.
            </p>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">üìù</span>
              <h4 class="card-title">Old Terminal</h4>
            </div>
            <p class="card-description">
              Lightweight text-based output display. Lower resource usage but limited to text output
              without full terminal emulation. Good for simple command output.
            </p>
          </div>

          <h3>Terminal Styles</h3>
          <ul>
            <li><strong>Window Style:</strong> Classic look with title bar and rounded corners</li>
            <li><strong>Embedded Style:</strong> Borderless, blends with panel layout</li>
          </ul>

          <h3>Terminal Features</h3>
          <ul>
            <li>Copy PID by clicking the PID badge</li>
            <li>Copy terminal output</li>
            <li>Clear terminal buffer</li>
            <li>Send input to interactive processes</li>
            <li>Resize terminal (affects PTY)</li>
          </ul>
        </section>

        <!-- Layouts Section -->
        <section id="layouts" class="section">
          <h2>Layouts</h2>

          <p>Marcha offers 10 layout presets to organize your workspace:</p>

          <table>
            <thead>
              <tr>
                <th>Layout</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Single</td>
                <td>One full-width pane</td>
              </tr>
              <tr>
                <td>2 Columns</td>
                <td>Two equal vertical panes</td>
              </tr>
              <tr>
                <td>3 Columns</td>
                <td>Three equal vertical panes</td>
              </tr>
              <tr>
                <td>2 Rows</td>
                <td>Two equal horizontal panes</td>
              </tr>
              <tr>
                <td>3 Rows</td>
                <td>Three equal horizontal panes</td>
              </tr>
              <tr>
                <td>2 Left + 1 Right</td>
                <td>Two stacked panes on left, one large on right</td>
              </tr>
              <tr>
                <td>1 Left + 2 Right</td>
                <td>One large pane on left, two stacked on right</td>
              </tr>
              <tr>
                <td>2 Top + 1 Bottom</td>
                <td>Two panes on top, one wide on bottom</td>
              </tr>
              <tr>
                <td>1 Top + 2 Bottom</td>
                <td>One wide pane on top, two on bottom</td>
              </tr>
              <tr>
                <td>2x2 Grid</td>
                <td>Four equal quadrants</td>
              </tr>
            </tbody>
          </table>

          <h3>Pane Types</h3>
          <ul>
            <li><strong>Tasks List:</strong> Shows your tasks, groups, and scripts</li>
            <li><strong>Running History:</strong> Displays execution history and scheduled tasks</li>
            <li><strong>Terminal:</strong> Terminal instance for process output</li>
          </ul>

          <h3>Drag and Drop</h3>
          <p>Drag pane headers to swap positions. Layout state persists across sessions.</p>
        </section>

        <!-- Script Configuration Section -->
        <section id="scripts" class="section">
          <h2>Script Configuration</h2>

          <p>
            Define reusable, parameterized scripts in <code>marcha.config.json</code> files.
            Place this file in your project root and load it in Marcha.
          </p>

          <h3>File Structure</h3>
          <pre><code>{
  "version": "1.0",
  "project": {
    "name": "My Project",
    "description": "Project scripts",
    "workingDirectory": "."
  },
  "scripts": [
    {
      "id": "unique-id",
      "name": "Script Name",
      "description": "What this script does",
      "executable": "python",
      "script": "scripts/my_script.py",
      "arguments": ["--flag"],
      "workingDirectory": ".",
      "emoji": "üêç",
      "category": "Development",
      "inputs": [...],
      "environment": {
        "DEBUG": "true"
      }
    }
  ]
}</code></pre>

          <h3>Input Types</h3>
          <table>
            <thead>
              <tr>
                <th>Type</th>
                <th>Description</th>
                <th>UI Control</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>string</code></td>
                <td>Text input</td>
                <td>Text field</td>
              </tr>
              <tr>
                <td><code>number</code></td>
                <td>Numeric input with optional min/max</td>
                <td>Number field</td>
              </tr>
              <tr>
                <td><code>boolean</code></td>
                <td>True/false toggle</td>
                <td>Checkbox</td>
              </tr>
              <tr>
                <td><code>file</code></td>
                <td>File path selection</td>
                <td>File picker</td>
              </tr>
              <tr>
                <td><code>directory</code></td>
                <td>Directory path selection</td>
                <td>Folder picker</td>
              </tr>
              <tr>
                <td><code>select</code></td>
                <td>Choice from predefined options</td>
                <td>Dropdown</td>
              </tr>
            </tbody>
          </table>

          <h3>Input Definition Example</h3>
          <pre><code>{
  "id": "environment",
  "name": "Environment",
  "type": "select",
  "required": true,
  "options": [
    {"value": "dev", "label": "Development"},
    {"value": "prod", "label": "Production"}
  ],
  "default": "dev",
  "placeholder": "Select environment"
}</code></pre>
        </section>

        <!-- History Section -->
        <section id="history" class="section">
          <h2>Execution History</h2>

          <p>Marcha tracks all task executions with detailed information:</p>

          <h3>History Entry Data</h3>
          <ul>
            <li><strong>Task Name:</strong> Name of the executed task</li>
            <li><strong>Launch Time:</strong> When the task started</li>
            <li><strong>End Time:</strong> When the task completed</li>
            <li><strong>Duration:</strong> How long it ran</li>
            <li><strong>Exit Code:</strong> Process exit code (0 = success)</li>
            <li><strong>Status:</strong> Running, Completed, Failed, or Stopped</li>
            <li><strong>PID:</strong> Process ID (for running tasks)</li>
            <li><strong>Launch Type:</strong> Direct or Scheduled</li>
          </ul>

          <h3>History Actions</h3>
          <ul>
            <li><strong>Show in Pane:</strong> Display running task in a terminal slot</li>
            <li><strong>Stop:</strong> Terminate a running process</li>
            <li><strong>Hide:</strong> Dismiss from default view</li>
            <li><strong>Delete:</strong> Permanently remove entry</li>
            <li><strong>Hide All:</strong> Dismiss all non-running entries</li>
            <li><strong>Delete All:</strong> Clear all history</li>
          </ul>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
          <h2>Settings</h2>

          <h3>Appearance</h3>
          <ul>
            <li><strong>Dark Mode:</strong> Toggle dark/light theme</li>
            <li><strong>Text Size:</strong> Small, Medium, Large, or Extra Large</li>
          </ul>

          <h3>Terminal</h3>
          <ul>
            <li><strong>Terminal Type:</strong> Dev Terminal or Old Terminal</li>
            <li><strong>Terminal Style:</strong> Window or Embedded</li>
            <li><strong>Terminal Theme:</strong> Color scheme selection</li>
            <li><strong>Font Size:</strong> Independent terminal text scaling</li>
          </ul>

          <h3>Process Management</h3>
          <ul>
            <li><strong>Max Concurrent Tasks:</strong> Limit simultaneous processes (1-20, default 10)</li>
          </ul>
        </section>

        <!-- Config File Section -->
        <section id="config-file" class="section">
          <h2>marcha.config.json Reference</h2>

          <p>Complete schema for script configuration files:</p>

          <pre><code>{
  "version": "1.0",
  "project": {
    "name": "string (required)",
    "description": "string (optional)",
    "workingDirectory": "string (optional, relative to config file)"
  },
  "scripts": [
    {
      "id": "string (required, unique)",
      "name": "string (required)",
      "description": "string (optional)",
      "executable": "string (required, e.g., 'python', 'npm')",
      "script": "string (optional, path to script file)",
      "arguments": ["array", "of", "strings"],
      "workingDirectory": "string (optional)",
      "emoji": "string (optional, single emoji)",
      "category": "string (optional, for grouping)",
      "inputs": [
        {
          "id": "string (required)",
          "name": "string (required)",
          "type": "string|number|boolean|file|directory|select",
          "required": "boolean (default: false)",
          "default": "any (type-appropriate)",
          "placeholder": "string (optional)",
          "min": "number (for number type)",
          "max": "number (for number type)",
          "flag": "string (for boolean, flag to add when true)",
          "options": [
            {"value": "any", "label": "string"}
          ]
        }
      ],
      "environment": {
        "KEY": "value"
      }
    }
  ]
}</code></pre>
        </section>

        <!-- Data Storage Section -->
        <section id="data-storage" class="section">
          <h2>Data Storage</h2>

          <p>All Marcha data is stored in <code>%APPDATA%\Marcha\</code>:</p>

          <table>
            <thead>
              <tr>
                <th>File</th>
                <th>Purpose</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>marcha_settings.json</code></td>
                <td>Application settings (theme, text size, etc.)</td>
              </tr>
              <tr>
                <td><code>marcha_tasks.json</code></td>
                <td>Task definitions</td>
              </tr>
              <tr>
                <td><code>marcha_task_groups.json</code></td>
                <td>Task group configurations</td>
              </tr>
              <tr>
                <td><code>marcha_task_history.json</code></td>
                <td>Execution history records</td>
              </tr>
              <tr>
                <td><code>marcha_layout.json</code></td>
                <td>Layout preset and pane assignments</td>
              </tr>
              <tr>
                <td><code>marcha_script_configs.json</code></td>
                <td>Paths to loaded config files</td>
              </tr>
              <tr>
                <td><code>marcha_preferences.json</code></td>
                <td>UI state preferences</td>
              </tr>
            </tbody>
          </table>

          <div class="alert alert-warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div class="alert-content">
              <div class="alert-title">Backup Your Data</div>
              <p>These JSON files are human-readable and can be backed up or edited manually if needed.</p>
            </div>
          </div>
        </section>

        <!-- Keyboard Shortcuts Section -->
        <section id="keyboard-shortcuts" class="section">
          <h2>Keyboard Shortcuts</h2>

          <table>
            <thead>
              <tr>
                <th>Shortcut</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>Ctrl + N</code></td>
                <td>New task</td>
              </tr>
              <tr>
                <td><code>Ctrl + ,</code></td>
                <td>Open settings</td>
              </tr>
              <tr>
                <td><code>Ctrl + K</code></td>
                <td>Focus search (in docs)</td>
              </tr>
              <tr>
                <td><code>Escape</code></td>
                <td>Clear search / Close dialogs</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Troubleshooting Section -->
        <section id="troubleshooting" class="section">
          <h2>Troubleshooting</h2>

          <h3>Process won't start</h3>
          <ul>
            <li>Check if you've reached the max concurrent tasks limit</li>
            <li>Verify the executable is in your system PATH</li>
            <li>Check the working directory exists</li>
            <li>Look for error messages in the terminal output</li>
          </ul>

          <h3>Terminal shows garbled output</h3>
          <ul>
            <li>Try switching to Dev Terminal type in settings</li>
            <li>Ensure the process outputs UTF-8 encoded text</li>
            <li>For Python, the app automatically sets PYTHONIOENCODING=utf-8</li>
          </ul>

          <h3>Process won't stop</h3>
          <ul>
            <li>Marcha first sends Ctrl+C, then waits 3 seconds</li>
            <li>If still running, it force-kills the process tree</li>
            <li>Use Task Manager if Marcha can't terminate it</li>
          </ul>

          <h3>Layout not saving</h3>
          <ul>
            <li>Check write permissions to %APPDATA%\Marcha\</li>
            <li>Try deleting <code>marcha_layout.json</code> to reset</li>
          </ul>

          <h3>Scripts not loading</h3>
          <ul>
            <li>Verify JSON syntax in marcha.config.json</li>
            <li>Check that all required fields are present</li>
            <li>Ensure paths are valid (use forward slashes or escaped backslashes)</li>
          </ul>
        </section>

        <!-- Footer -->
        <footer style="margin-top: 64px; padding-top: 32px; border-top: 1px solid var(--border-color); text-align: center; color: var(--text-muted);">
          <p>Marcha Documentation ‚Ä¢ Built with Flutter</p>
          <p style="margin-top: 8px;">
            <a href="https://github.com/yourusername/marcha">GitHub</a> ‚Ä¢
            <a href="#overview">Back to Top</a>
          </p>
        </footer>
      </div>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
